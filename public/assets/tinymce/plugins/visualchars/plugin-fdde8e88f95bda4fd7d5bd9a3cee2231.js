/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.7.1 (2021-03-17)
 */
!function(){"use strict";var e,t,n,r,a,o,i=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(e){return function(){return e}},s=c(!1),l=c(!0),u=function(){return f},f=(e=function(e){return e.isNone()},{fold:function(e){return e()},is:s,isSome:s,isNone:l,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:n,orThunk:t,map:u,each:function(){},bind:u,exists:s,forall:l,filter:u,equals:e,equals_:e,toArray:function(){return[]},toString:c("none()")}),d=function(e){var t=c(e),n=function(){return a},r=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:s,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return d(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:f},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,function(t){return n(e,t)})}};return a},m=function(e){return null===e||void 0===e?f:d(e)},g=function(e){return function(t){return typeof t===e}},h=(r="string",function(e){return n=typeof(t=e),(null===t?"null":"object"==n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"==n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n)===r;var t,n}),p=g("boolean"),y=g("number"),v=function(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)},b=Object.keys,w=function(e,t){for(var n=b(e),r=0,a=n.length;a>r;r++){var o=n[r];t(e[o],o)}},k=("undefined"!=typeof window||Function("return this;")(),function(e){return e.dom.nodeValue}),_=(a=3,function(e){return e.dom.nodeType===a}),C=function(e,t,n){!function(e,t,n){if(!(h(n)||p(n)||y(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)},x=function(e,t){e.dom.removeAttribute(t)},z=function(e,t){var n,r,a=(n=t,null===(r=e.dom.getAttribute(n))?void 0:r);return void 0===a||""===a?[]:a.split(" ")},S=function(e){return void 0!==e.dom.classList},T=function(e,t){return a=t,o=z(n=e,r="class").concat([a]),C(n,r,o.join(" ")),!0;var n,r,a,o},N=function(e,t){return a=t,0<(o=function(e,t){for(var n=[],r=0,a=e.length;a>r;r++){var o=e[r];t(o,r)&&n.push(o)}return n}(z(n=e,r="class"),function(e){return e!==a})).length?C(n,r,o.join(" ")):x(n,r),!1;var n,r,a,o},E=function(e){0===(S(e)?e.dom.classList:z(e,"class")).length&&x(e,"class")},D=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},A={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return D(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return D(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return D(n)},fromDom:D,fromPoint:function(e,t,n){return m(e.dom.elementFromPoint(t,n)).map(D)}},O={"\xa0":"nbsp","\xad":"shy"},R=function(e,t){var n="";return w(e,function(e,t){n+=t}),new RegExp("["+n+"]",t?"g":"")},P=R(O),L=R(O,!0),M=(o="",w(O,function(e){o&&(o+=","),o+="span.mce-"+e}),o),B="mce-nbsp",j=function(e){return'<span data-mce-bogus="1" class="mce-'+O[e]+'">'+e+"</span>"},I=function(e){var t=k(e);return _(e)&&void 0!==t&&P.test(t)},F=function(e,t){var n=[],r=function(e,t){for(var n=e.length,r=new Array(n),a=0;n>a;a++){var o=e[a];r[a]=t(o,a)}return r}(e.dom.childNodes,A.fromDom);return v(r,function(e){t(e)&&(n=n.concat([e])),n=n.concat(F(e,t))}),n},H=function(e){return"span"===e.nodeName.toLowerCase()&&e.classList.contains("mce-nbsp-wrap")},q=function(e,t){var n=F(A.fromDom(t),I);v(n,function(t){var n,r,a=t.dom.parentNode;if(H(a))n=A.fromDom(a),r=B,S(n)?n.dom.classList.add(r):T(n,r);else{for(var o=e.dom.encode(k(t)).replace(L,j),i=e.dom.create("div",null,o),c=void 0;c=i.lastChild;)e.dom.insertAfter(c,t.dom);e.dom.remove(t.dom)}})},U=function(e,t){var n=e.dom.select(M,t);v(n,function(t){var n,r;H(t)?(n=A.fromDom(t),r=B,S(n)?n.dom.classList.remove(r):N(n,r),E(n)):e.dom.remove(t,!0)})},V=function(e){var t=e.getBody(),n=e.selection.getBookmark(),r=void 0!==(r=function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}}(e.selection.getNode(),t))?r:t;U(e,r),q(e,r),e.selection.moveToBookmark(n)},$=function(e,t){var n,r;n=e,r=t.get(),n.fire("VisualChars",{state:r});var a=e.getBody();(!0===t.get()?q:U)(e,a)},W=function(e,t){e.addCommand("mceVisualChars",function(){!function(e,t){t.set(!t.get());var n=e.selection.getBookmark();$(e,t),e.selection.moveToBookmark(n)}(e,t)})},X=tinymce.util.Tools.resolve("tinymce.util.Delay"),K=function(e,t){return function(n){n.setActive(t.get());var r=function(e){return n.setActive(e.state)};return e.on("VisualChars",r),function(){return e.off("VisualChars",r)}}};i.add("visualchars",function(e){var t,n,r,a,o,i,c,s,l,u,f=(t=e.getParam("visualchars_default_state",!1),n=t,{get:function(){return n},set:function(e){n=e}});return W(e,f),a=f,(r=e).ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:function(){return r.execCommand("mceVisualChars")},onSetup:K(r,a)}),r.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:function(){return r.execCommand("mceVisualChars")},onSetup:K(r,a)}),o=e,i=f,c=X.debounce(function(){V(o)},300),!1!==o.getParam("forced_root_block")&&o.on("keydown",function(e){!0===i.get()&&(13===e.keyCode?V(o):c())}),o.on("remove",c.stop),l=f,(s=e).on("init",function(){$(s,l)}),u=f,{isEnabled:function(){return u.get()}}})}();