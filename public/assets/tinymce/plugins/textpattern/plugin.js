/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.7.1 (2021-03-17)
 */
!function(){"use strict";var e,t,n,r=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=function(){},i=function(e){return function(){return e}},c=function(e){return e},s=i(!1),l=i(!0),u=function(){return f},f=(e=function(e){return e.isNone()},{fold:function(e){return e()},is:s,isSome:s,isNone:l,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:i(null),getOrUndefined:i(void 0),or:n,orThunk:t,map:u,each:o,bind:u,exists:s,forall:l,filter:u,equals:e,equals_:e,toArray:function(){return[]},toString:i("none()")}),d=function(e){var t=i(e),n=function(){return a},r=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:l,isNone:s,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return d(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:f},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(s,function(t){return n(e,t)})}};return a},m={some:d,none:u,from:function(e){return null===e||void 0===e?f:d(e)}},g=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"==r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},h=g("string"),p=g("object"),y=g("array"),v=Array.prototype.slice,b=Array.prototype.indexOf,w=function(e,t){return n=e,r=t,-1<b.call(n,r);var n,r},k=function(e,t){for(var n=e.length,r=new Array(n),a=0;n>a;a++){var o=e[a];r[a]=t(o,a)}return r},_=function(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)},C=function(e,t){for(var n=[],r=0,a=e.length;a>r;r++){var o=e[r];t(o,r)&&n.push(o)}return n},x=function(e,t,n){return function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)}(e,function(e){n=t(n,e)}),n},z=function(e,t){return function(e,t,n){for(var r=0,a=e.length;a>r;r++){var o=e[r];if(t(o,r))return m.some(o);if(n(o,r))break}return m.none()}(e,t,s)},S=function(e,t){for(var n=0,r=e.length;r>n;++n)if(!0!==t(e[n],n))return!1;return!0},T=function(e){return t=e,(n=0)<=n&&n<t.length?m.some(t[n]):m.none();var t,n},N=Object.keys,E=Object.hasOwnProperty,D=(function(e){if(!y(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};_(e,function(r,a){var o=N(r);if(1!==o.length)throw new Error("one and only one name per case");var i=o[0],c=r[i];if(void 0!==n[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!y(c))throw new Error("case arguments must be an array");t.push(i),n[i]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=n.length;if(o!==c.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+o);return{fold:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[a].apply(null,n)},match:function(e){var r=N(e);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!S(t,function(e){return w(r,e)}))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,n)},log:function(e){console.log(e,{constructors:t,constructor:i,params:n})}}}})}([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(e){var t=[],n=[];return _(e,function(e){e.fold(function(e){t.push(e)},function(e){n.push(e)})}),{errors:t,values:n}}),A=function(e){return{is:function(t){return e===t},isValue:l,isError:s,getOr:i(e),getOrThunk:i(e),getOrDie:i(e),or:function(){return A(e)},orThunk:function(){return A(e)},fold:function(t,n){return n(e)},map:function(t){return A(t(e))},mapError:function(){return A(e)},each:function(t){t(e)},bind:function(t){return t(e)},exists:function(t){return t(e)},forall:function(t){return t(e)},toOptional:function(){return m.some(e)}}},O=function(e){return{is:s,isValue:s,isError:l,getOr:c,getOrThunk:function(e){return e()},getOrDie:function(){return t=String(e),function(){throw new Error(t)}();var t},or:function(e){return e},orThunk:function(e){return e()},fold:function(t){return t(e)},map:function(){return O(e)},mapError:function(t){return O(t(e))},each:o,bind:function(){return O(e)},exists:s,forall:l,toOptional:m.none}},R={value:A,error:O,fromOption:function(e,t){return e.fold(function(){return O(t)},A)}},P=function(e){return"inline-command"===e.type||"inline-format"===e.type},L=function(e){return"block-command"===e.type||"block-format"===e.type},M=function(e){return t=e,n=function(e,t){return e.start.length===t.start.length?0:e.start.length>t.start.length?-1:1},(r=v.call(t,0)).sort(n),r;var t,n,r},B=function(e){var t=function(t){return R.error({message:t,pattern:e})},n=function(n,r,a){if(void 0===e.format)return void 0!==e.cmd?h(e.cmd)?R.value(a(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters");var o=void 0;if(y(e.format)){if(!S(e.format,h))return t(n+" pattern has non-string items in the `format` array");o=e.format}else{if(!h(e.format))return t(n+" pattern has non-string `format` parameter");o=[e.format]}return R.value(r(o))};if(!p(e))return t("Raw pattern is not an object");if(!h(e.start))return t("Raw pattern is missing `start` parameter");if(void 0===e.end)return void 0!==e.replacement?h(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):R.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",function(t){return{type:"block-format",start:e.start,format:t[0]}},function(t,n){return{type:"block-command",start:e.start,cmd:t,value:n}});if(!h(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");var r=e.start,a=e.end;return 0===a.length&&(a=r,r=""),n("Inline",function(e){return{type:"inline-format",start:r,end:a,format:e}},function(e,t){return{type:"inline-command",start:r,end:a,cmd:e,value:t}})},j=function(e){return"block-command"===e.type?{start:e.start,cmd:e.cmd,value:e.value}:"block-format"===e.type?{start:e.start,format:e.format}:"inline-command"===e.type?"mceInsertContent"===e.cmd&&""===e.start?{start:e.end,replacement:e.value}:{start:e.start,end:e.end,cmd:e.cmd,value:e.value}:"inline-format"===e.type?{start:e.start,end:e.end,format:1===e.format.length?e.format[0]:e.format}:void 0},I=function(e){return{inlinePatterns:C(e,P),blockPatterns:M(C(e,L))}},F=function(e){return{setPatterns:function(t){var n=D(k(t,B));if(0<n.errors.length){var r=n.errors[0];throw new Error(r.message+":\n"+JSON.stringify(r.pattern,null,2))}e.set(I(n.values))},getPatterns:function(){return function(){for(var e=0,t=0,n=arguments.length;n>t;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;n>t;t++)for(var o=arguments[t],i=0,c=o.length;c>i;i++,a++)r[a]=o[i];return r}(k(e.get().inlinePatterns,j),k(e.get().blockPatterns,j))}}},H="undefined"!=typeof window?window:Function("return this;")(),q=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=H.console;n&&(n.error?n.error.apply(n,e):n.log.apply(n,e))},U=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],V=function(e){var t=e.getParam("forced_root_block","p");return!1===t?"":!0===t?"p":t},$=tinymce.util.Tools.resolve("tinymce.util.Delay"),W=tinymce.util.Tools.resolve("tinymce.util.VK"),X=tinymce.util.Tools.resolve("tinymce.util.Tools"),K=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),G=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),Y=function(e,t){return{container:e,offset:t}},J=function(e){return e.nodeType===Node.TEXT_NODE},Z=function(e,t,n){var r;t&&e.isEmpty(t)&&!n(t)&&(r=t.parentNode,e.remove(t),Z(e,r,n))},Q=function(e,t,n,r){void 0===r&&(r=!0);var a=t.startContainer.parentNode,o=t.endContainer.parentNode;t.deleteContents(),r&&!n(t.startContainer)&&(J(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),J(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),Z(e,a,n),a!==o&&Z(e,o,n))},ee=function(e,t){var n=t.get(e);return y(n)&&T(n).exists(function(e){return t=e,n="block",E.call(t,n);var t,n})},te=function(e){return 0===e.start.length},ne=function(e,t){var n=m.from(e.dom.getParent(t.startContainer,e.dom.isBlock));return""===V(e)?n.orThunk(function(){return m.some(e.getBody())}):n},re=K.DOM,ae=function(e){return function(t){return e===t?-1:0}},oe=function(e,t,n){if(J(e)&&t>=0)return m.some(Y(e,t));var r=G(re);return m.from(r.backwards(e,t,ae(e),n)).map(function(e){return Y(e.container,e.container.data.length)})},ie=function(e,t,n){if(!J(e))return m.none();var r=e.textContent;if(t>=0&&t<=r.length)return m.some(Y(e,t));var a=G(re);return m.from(a.backwards(e,t,ae(e),n)).bind(function(e){var r=e.container.data;return ie(e.container,t+r.length,n)})},ce=function(e,t,n){if(!J(e))return m.none();var r=e.textContent;if(t<=r.length)return m.some(Y(e,t));var a=G(re);return m.from(a.forwards(e,t,ae(e),n)).bind(function(e){return ce(e.container,t-r.length,n)})},se=function(e,t,n,r,a){var o,i=G(e,(o=e,function(e){return o.isBlock(e)||w(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===o.getContentEditable(e)}));return m.from(i.backwards(t,n,r,a))},le=function(e,t,n){if(J(t)&&(0>n||n>t.data.length))return[];for(var r=[n],a=t;a!==e&&a.parentNode;){for(var o=a.parentNode,i=0;i<o.childNodes.length;i++)if(o.childNodes[i]===a){r.push(i);break}a=o}return a===e?r.reverse():[]},ue=function(e,t,n,r,a){return{start:le(e,t,n),end:le(e,r,a)}},fe=function(e,t){var n,r,a,o=t.slice(),i=o.pop();return(n=o,r=function(e,t){return e.bind(function(e){return m.from(e.childNodes[t])})},a=m.some(e),_(n,function(e){a=r(a,e)}),a).bind(function(e){return J(e)&&(0>i||i>e.data.length)?m.none():m.some({node:e,offset:i})})},de=function(e,t){return fe(e,t.start).bind(function(n){var r=n.node,a=n.offset;return fe(e,t.end).map(function(e){var t=e.node,n=e.offset,o=document.createRange();return o.setStart(r,a),o.setEnd(t,n),o})})},me=function(e,t,n){(function(e,t,n){if(J(e)&&t>=e.length)return m.some(Y(e,t));var r=G(re);return m.from(r.forwards(e,t,ae(e),n)).map(function(e){return Y(e.container,0)})})(t,0,t).each(function(r){var a=r.container;ce(a,n.start.length,t).each(function(n){var r=e.createRng();r.setStart(a,0),r.setEnd(n.container,n.offset),Q(e,r,function(e){return e===t})})})},ge=function(e,t){var n=e.dom,r=e.selection.getRng();return ne(e,r).filter(function(t){var r=V(e),a=""===r&&n.is(t,"body")||n.is(t,r);return null!==t&&a}).bind(function(e){var r,a,o,i=e.textContent;return(r=t,o=(a=i).replace("\xa0"," "),z(r,function(e){return 0===a.indexOf(e.start)||0===o.indexOf(e.start)})).map(function(t){return X.trim(i).length===t.start.length?[]:[{pattern:t,range:ue(n.getRoot(),e,0,e,0)}]})}).getOr([])},he=function(e,t){var n;0!==t.length&&(n=e.selection.getBookmark(),_(t,function(t){return r=t,a=(n=e).dom,o=r.pattern,i=de(a.getRoot(),r.range).getOrDie("Unable to resolve path range"),ne(n,i).each(function(e){"block-format"===o.type?ee(o.format,n.formatter)&&n.undoManager.transact(function(){me(n.dom,e,o),n.formatter.apply(o.format)}):"block-command"===o.type&&n.undoManager.transact(function(){me(n.dom,e,o),n.execCommand(o.cmd,!1,o.value)})}),1;var n,r,a,o,i}),e.selection.moveToBookmark(n))},pe=0,ye=function(e,t){return e.create("span",{"data-mce-type":"bookmark",id:t})},ve=function(e,t){var n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},be=function(e,t,n){var r=de(e.getRoot(),n).getOrDie("Unable to resolve path range"),a=r.startContainer,o=r.endContainer,i=0===r.endOffset?o:o.splitText(r.endOffset),c=0===r.startOffset?a:a.splitText(r.startOffset);return{prefix:t,end:i.parentNode.insertBefore(ye(e,t+"-end"),i),start:c.parentNode.insertBefore(ye(e,t+"-start"),c)}},we=function(e,t,n){Z(e,e.get(t.prefix+"-end"),n),Z(e,e.get(t.prefix+"-start"),n)},ke=function(e,t,n,r){var a,o=t.start;return se(e,r.container,r.offset,(a=o,function(e,t){var n=e.data.substring(0,t),r=n.lastIndexOf(a.charAt(a.length-1)),o=n.lastIndexOf(a);return-1!==o?o+a.length:-1!==r?r+1:-1}),n).bind(function(r){if(r.offset>=o.length){var a=e.createRng();return a.setStart(r.container,r.offset-o.length),a.setEnd(r.container,r.offset),m.some(a)}var i=r.offset-o.length;return ie(r.container,i,n).map(function(t){var n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(r.container,r.offset),n}).filter(function(e){return e.toString()===o}).orThunk(function(){return ke(e,t,n,Y(r.container,0))})})},_e=function(e,t,n){var r=e.dom,a=r.getRoot(),o=n.pattern,i=n.position.container,c=n.position.offset;return ie(i,c-n.pattern.end.length,t).bind(function(s){var l=ue(a,s.container,s.offset,i,c);if(te(o))return m.some({matches:[{pattern:o,startRng:l,endRng:l}],position:s});var u=Ce(e,n.remainingPatterns,s.container,s.offset,t),f=u.getOr({matches:[],position:s}),d=f.position;return function(e,t,n,r,a,o){if(void 0===o&&(o=!1),0!==t.start.length||o)return oe(n,r,a).bind(function(n){return ke(e,t,a,n).bind(function(e){if(o){if(e.endContainer===n.container&&e.endOffset===n.offset)return m.none();if(0===n.offset&&e.endContainer.textContent.length===e.endOffset)return m.none()}return m.some(e)})});var i=e.createRng();return i.setStart(n,r),i.setEnd(n,r),m.some(i)}(r,o,d.container,d.offset,t,u.isNone()).map(function(e){var t,n=ue(a,(t=e).startContainer,t.startOffset,t.endContainer,t.endOffset);return{matches:f.matches.concat([{pattern:o,startRng:n,endRng:l}]),position:Y(e.startContainer,e.startOffset)}})})},Ce=function(e,t,n,r,a){var o=e.dom;return oe(n,r,o.getRoot()).bind(function(i){var c=o.createRng();c.setStart(a,0),c.setEnd(n,r);for(var s,l,u,f,d,g=c.toString(),h=0;h<t.length;h++){var p=t[h];if(s=g,l=p.end,d=f=u=void 0,f=l,d=(u=s).length-l.length,""===f||u.length>=f.length&&u.substr(d,d+f.length)===f){var y=t.slice();y.splice(h,1);var v=_e(e,a,{pattern:p,remainingPatterns:y,position:i});if(v.isSome())return v}}return m.none()})},xe=function(e,t,n){e.selection.setRng(n),"inline-format"===t.type?_(t.format,function(t){e.formatter.apply(t)}):e.execCommand(t.cmd,!1,t.value)},ze=function(e,t){var n,r,o=(n="mce_textpattern",r=(new Date).getTime(),n+"_"+Math.floor(1e9*Math.random())+ ++pe+String(r)),i=x(t,function(t,n){var r=be(e,o+"_end"+t.length,n.endRng);return t.concat([a(a({},n),{endMarker:r})])},[]);return x(i,function(t,n){var r=i.length-t.length-1,c=te(n.pattern)?n.endMarker:be(e,o+"_start"+r,n.startRng);return t.concat([a(a({},n),{startMarker:c})])},[])},Se=function(e,t,n){var r=e.selection.getRng();return!1===r.collapsed?[]:ne(e,r).bind(function(a){var o=r.startOffset-(n?1:0);return Ce(e,t,r.startContainer,o,a)}).fold(function(){return[]},function(e){return e.matches})},Te=function(e,t){var n,r,a;0!==t.length&&(n=e.dom,r=e.selection.getBookmark(),a=ze(n,t),_(a,function(t){var r,a,o,i,c,s=n.getParent(t.startMarker.start,n.isBlock),l=function(e){return e===s};te(t.pattern)?(r=e,a=t.pattern,o=t.endMarker,i=l,c=ve(r.dom,o),Q(r.dom,c,i),xe(r,a,c)):function(e,t,n,r,a){var o=e.dom,i=ve(o,r),c=ve(o,n);Q(o,c,a),Q(o,i,a);var s={prefix:n.prefix,start:n.end,end:r.start},l=ve(o,s);xe(e,t,l)}(e,t.pattern,t.startMarker,t.endMarker,l),we(n,t.endMarker,l),we(n,t.startMarker,l)}),e.selection.moveToBookmark(r))},Ne=function(e,t){var n=Se(e,t.inlinePatterns,!0);0<n.length&&e.undoManager.transact(function(){Te(e,n)})},Ee=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0},De=function(e,t){var n=[",",".",";",":","!","?"],r=[32];e.on("keydown",function(n){13!==n.keyCode||W.modifierPressed(n)||!function(e,t){if(!e.selection.isCollapsed())return!1;var n=Se(e,t.inlinePatterns,!1),r=ge(e,t.blockPatterns);return(0<r.length||0<n.length)&&(e.undoManager.add(),e.undoManager.extra(function(){e.execCommand("mceInsertNewLine")},function(){e.insertContent("\ufeff"),Te(e,n),he(e,r);var t=e.selection.getRng(),a=oe(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),a.each(function(t){var n=t.container;"\ufeff"===n.data.charAt(t.offset-1)&&(n.deleteData(t.offset-1,1),Z(e.dom,n.parentNode,function(t){return t===e.dom.getRoot()}))})}),!0)}(e,t.get())||n.preventDefault()},!0),e.on("keyup",function(n){Ee(r,n,function(e,t){return e===t.keyCode&&!1===W.modifierPressed(t)})&&Ne(e,t.get())}),e.on("keypress",function(r){Ee(n,r,function(e,t){return e.charCodeAt(0)===t.charCode})&&$.setEditorTimeout(e,function(){Ne(e,t.get())})})};r.add("textpattern",function(e){var t,n,r=(t=function(e){var t=e.getParam("textpattern_patterns",U,"array");if(!y(t))return q("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]};var n=D(k(t,B));return _(n.errors,function(e){return q(e.message,e.pattern),0}),I(n.values)}(e),n=t,{get:function(){return n},set:function(e){n=e}});return De(e,r),F(r)})}();