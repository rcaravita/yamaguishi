/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.7.1 (2021-03-17)
 */
!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(e){var r=function(e){var r="",a=e.dom.encode,i=e.getParam("content_style","","string");r+='<base href="'+a(e.documentBaseURI.getURI())+'">';var o=e.getParam("content_css_cors",!1,"boolean")?' crossorigin="anonymous"':"";n.each(e.contentCSS,function(t){r+='<link type="text/css" rel="stylesheet" href="'+a(e.documentBaseURI.toAbsolute(t))+'"'+o+">"}),i&&(r+='<style type="text/css">'+i+"</style>");var c,s,l,u,f,d,m,g=-1===(u=(c=e).getParam("body_id","tinymce","string")).indexOf("=")?u:(l=(s=c).getParam("body_id","","hash"))[s.id]||l,h=-1===(m=(f=e).getParam("body_class","","string")).indexOf("=")?m:(d=f).getParam("body_class","","hash")[d.id]||"",p='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(t.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);</script> ",y=e.getBody().dir,v=y?' dir="'+a(y)+'"':"";return"<!DOCTYPE html><html><head>"+r+'</head><body id="'+a(g)+'" class="mce-content-body '+a(h)+'"'+v+">"+e.getContent()+p+"</body></html>"}(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:r}}).focus("close")};e.add("preview",function(e){var t,n;(t=e).addCommand("mcePreview",function(){r(t)}),(n=e).ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:function(){return n.execCommand("mcePreview")}}),n.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:function(){return n.execCommand("mcePreview")}})})}();