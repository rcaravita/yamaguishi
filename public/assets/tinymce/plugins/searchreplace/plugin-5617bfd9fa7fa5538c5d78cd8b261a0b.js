/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.7.1 (2021-03-17)
 */
!function(){"use strict";var e,t,n,r,a,i,o,c=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},s=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;r>n;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},u=function(e){return function(){return e}},f=u(!1),d=u(!0),m=u("[!-#%-*,-\\/:;?@\\[-\\]_{}\xa1\xab\xb7\xbb\xbf;\xb7\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1361-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u3008\u3009\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30\u2e31\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]"),g=function(){return h},h=(e=function(e){return e.isNone()},{fold:function(e){return e()},is:f,isSome:f,isNone:d,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:n,orThunk:t,map:g,each:function(){},bind:g,exists:f,forall:d,filter:g,equals:e,equals_:e,toArray:function(){return[]},toString:u("none()")}),p=function(e){var t=u(e),n=function(){return a},r=function(t){return t(e)},a={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:d,isNone:f,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(t){return p(t(e))},each:function(t){t(e)},bind:r,exists:r,forall:r,filter:function(t){return t(e)?a:h},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(t){return t.is(e)},equals_:function(t,n){return t.fold(f,function(t){return n(e,t)})}};return a},y={some:p,none:g,from:function(e){return null===e||void 0===e?h:p(e)}},v=m,b=tinymce.util.Tools.resolve("tinymce.util.Tools"),w=function(e){return function(t){return r=typeof(n=t),(null===n?"null":"object"==r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===e;var n,r}},k=function(e){return function(t){return typeof t===e}},_=w("string"),C=w("array"),x=k("boolean"),z=k("number"),S=Array.prototype.slice,T=Array.prototype.push,N=function(e,t){for(var n=e.length,r=new Array(n),a=0;n>a;a++){var i=e[a];r[a]=t(i,a)}return r},E=function(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)},D=function(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)},A=function(e,t){return function(e){for(var t=[],n=0,r=e.length;r>n;++n){if(!C(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);T.apply(t,e[n])}return t}(N(e,t))},O=Object.hasOwnProperty,R=function(e,t){return O.call(e,t)},P=("undefined"!=typeof window||Function("return this;")(),r=3,function(e){return e.dom.nodeType===r}),L=function(e,t,n){!function(e,t,n){if(!(_(n)||x(n)||z(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)},M=function(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},B={fromHtml:function(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return M(n.childNodes[0])},fromTag:function(e,t){var n=(t||document).createElement(e);return M(n)},fromText:function(e,t){var n=(t||document).createTextNode(e);return M(n)},fromDom:M,fromPoint:function(e,t,n){return y.from(e.dom.elementFromPoint(t,n)).map(M)}},j=function(e,t){return{element:e,offset:t}},I=function(e,t){var n=N(e.dom.childNodes,B.fromDom);return 0<n.length&&t<n.length?j(n[t],0):j(e,t)},F=function(e,t){var n;(n=e,y.from(n.dom.parentNode).map(B.fromDom)).each(function(n){n.dom.insertBefore(t.dom,e.dom)})},H=function(e,t){var n;F(e,t),n=e,t.dom.appendChild(n.dom)},q=(a=P,i="text",{get:function(e){if(!a(e))throw new Error("Can only get "+i+" value of a "+i+" node");return o(e).getOr("")},getOption:o=function(e){return a(e)?y.from(e.dom.nodeValue):y.none()},set:function(e,t){if(!a(e))throw new Error("Can only set raw "+i+" value of a "+i+" node");e.dom.nodeValue=t}}),U=function(e){return q.get(e)},V=function(e,t){return n=t,i=void 0===(r=e)?document:r.dom,1!==(a=i).nodeType&&9!==a.nodeType&&11!==a.nodeType||0===a.childElementCount?[]:N(i.querySelectorAll(n),B.fromDom);var n,r,a,i},$=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),W=function(e,t){return e.isBlock(t)||R(e.schema.getShortEndedElements(),t.nodeName)},X=function(e,t){return"false"===e.getContentEditable(t)},K=function(e,t){return!e.isBlock(t)&&R(e.schema.getWhiteSpaceElements(),t.nodeName)},G=function(){return{sOffset:0,fOffset:0,elements:[]}},Y=function(e,t){return I(B.fromDom(e),t)},J=function(e,t,n,r,a,i){void 0===i&&(i=!0);for(var o=i?t(!1):n;o;){var c=X(e,o);if(c||K(e,o)){if(c?r.cef(o):r.boundary(o))break;o=t(!0)}else{if(W(e,o)){if(r.boundary(o))break}else 3===o.nodeType&&r.text(o);if(o===a)break;o=t(!1)}}},Z=function(e,t,n,r,a){var i,o,c,s,l,u,f;W(i=e,o=n)||X(i,o)||K(i,o)||(s=o,"true"===(c=i).getContentEditable(s)&&"false"===c.getContentEditableParent(s.parentNode))||(l=e.getParent(r,e.isBlock),u=new $(n,l),f=a?u.next.bind(u):u.prev.bind(u),J(e,f,n,{boundary:d,cef:d,text:function(e){a?t.fOffset+=e.length:t.sOffset+=e.length,t.elements.push(B.fromDom(e))}}))},Q=function(e,t,n,r,a,i){void 0===i&&(i=!0);var o=new $(n,t),c=[],s=G();Z(e,s,n,t,!1);var l=function(){return 0<s.elements.length&&(c.push(s),s=G()),!1};return J(e,o.next.bind(o),n,{boundary:l,cef:function(e){return l(),a&&c.push.apply(c,a.cef(e)),!1},text:function(e){s.elements.push(B.fromDom(e)),a&&a.text(e,s)}},r,i),r&&Z(e,s,r,t,!0),l(),c},ee=function(e,t){var n=Y(t.startContainer,t.startOffset),r=n.element.dom,a=Y(t.endContainer,t.endOffset),i=a.element.dom;return Q(e,t.commonAncestorContainer,r,i,{text:function(e,t){e===i?t.fOffset+=e.length-a.offset:e===r&&(t.sOffset+=n.offset)},cef:function(t){var n,r,a,i=A(V(B.fromDom(t),"*[contenteditable=true]"),function(t){var n=t.dom;return Q(e,n,n)});return n=i,r=function(e,t){return n=e.elements[0].dom,r=t.elements[0].dom,a=n,i=r,o=Node.DOCUMENT_POSITION_PRECEDING,0!=(a.compareDocumentPosition(i)&o)?1:-1;var n,r,a,i,o},(a=S.call(n,0)).sort(r),a}},!1)},te=function(e,t){return t.collapsed?[]:ee(e,t)},ne=function(e,t){var n=e.createRng();return n.selectNode(t),te(e,n)},re=function(e,t){var n,r;return function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],a=[],i=0,o=e.length;o>i;i++){var c=e[i],s=t(c);s!==n&&(r.push(a),a=[]),n=s,a.push(c)}return 0!==a.length&&r.push(a),r}((n=function(e,n){var r=U(n),a=e.last,i=a+r.length,o=A(t,function(e,t){return e.start<i&&e.finish>a?[{element:n,start:Math.max(a,e.start)-a,finish:Math.min(i,e.finish)-a,matchId:t}]:[]});return{results:e.results.concat(o),last:i}},r={results:[],last:0},E(e,function(e){r=n(r,e)}),r.results),function(e){return e.matchId})},ae=function(e,t){return A(t,function(t){var n=t.elements,r=N(n,U).join(""),a=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);var a=t.regex;a.lastIndex=n;for(var i,o=[];i=a.exec(e);){var c=i[t.matchIndex],s=i.index+i[0].indexOf(c),l=s+c.length;if(l>r)break;o.push({start:s,finish:l}),a.lastIndex=l}return o}(r,e,t.sOffset,r.length-t.fOffset);return re(n,a)})},ie=function(e,t){D(e,function(e,n){D(e,function(e){var r=B.fromDom(t.cloneNode(!1));L(r,"data-mce-index",n);var a,i=e.element.dom;i.length===e.finish&&0===e.start?H(e.element,r):(i.length!==e.finish&&i.splitText(e.finish),a=i.splitText(e.start),H(B.fromDom(a),r))})})},oe=function(e,t,n,r){var a,i=n.getBookmark(),o=e.select("td[data-mce-selected],th[data-mce-selected]"),c=0<o.length?(a=e,A(o,function(e){return ne(a,e)})):te(e,n.getRng()),s=ae(t,c);return ie(s,r),n.moveToBookmark(i),s.length},ce=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},se=function(e,t,n,r){var a=e.dom.create("span",{"data-mce-bogus":1});a.className="mce-match-marker";var i,o,c,s,l,u=e.getBody();return ve(e,t,!1),r?oe(e.dom,n,e.selection,a):(i=e.dom,o=n,c=a,s=ne(i,u),l=ae(o,s),ie(l,c),l.length)},le=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},ue=function(e,t){var n=[],r=b.toArray(e.getBody().getElementsByTagName("span"));if(r.length)for(var a=0;a<r.length;a++){var i=ce(r[a]);null!==i&&i.length&&i===t.toString()&&n.push(r[a])}return n},fe=function(e,t,n){var r=t.get(),a=r.index,i=e.dom;(n=!1!==n)?a+1===r.count?a=0:a++:a-1==-1?a=r.count-1:a--,i.removeClass(ue(e,r.index),"mce-match-marker-selected");var o=ue(e,a);return o.length?(i.addClass(ue(e,a),"mce-match-marker-selected"),e.selection.scrollIntoView(o[0]),a):-1},de=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},me=function(e,t,n,r,a,i){var o,c,s,l=(o=a,c="("+n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")",o?"(?:^|\\s|"+v()+")"+c+"(?=$|\\s|"+v()+")":c),u={regex:new RegExp(l,r?"g":"gi"),matchIndex:1},f=se(e,t,u,i);return f&&(s=fe(e,t,!0),t.set({index:s,count:f,text:n,matchCase:r,wholeWord:a,inSelection:i})),f},ge=function(e,t){var n=fe(e,t,!0);t.set(l(l({},t.get()),{index:n}))},he=function(e,t){var n=fe(e,t,!1);t.set(l(l({},t.get()),{index:n}))},pe=function(e){var t=ce(e);return null!==t&&0<t.length},ye=function(e,t,n,r,a){var i,o=t.get(),c=o.index,s=c;r=!1!==r;for(var u=e.getBody(),f=b.grep(b.toArray(u.getElementsByTagName("span")),pe),d=0;d<f.length;d++){var m=ce(f[d]),g=i=parseInt(m,10);if(a||g===o.index){for(n.length?(f[d].firstChild.nodeValue=n,le(f[d])):de(e.dom,f[d]);f[++d];){if((g=parseInt(ce(f[d]),10))!==i){d--;break}de(e.dom,f[d])}r&&s--}else i>c&&f[d].setAttribute("data-mce-index",String(i-1))}return t.set(l(l({},o),{count:a?0:o.count-1,index:s})),(r?ge:he)(e,t),!a&&0<t.get().count},ve=function(e,t,n){for(var r,a,i=t.get(),o=b.toArray(e.getBody().getElementsByTagName("span")),c=0;c<o.length;c++){var s=ce(o[c]);null!==s&&s.length&&(s===i.index.toString()&&(r=r||o[c].firstChild,a=o[c].firstChild),le(o[c]))}if(t.set(l(l({},i),{index:-1,count:0,text:""})),r&&a){var u=e.dom.createRng();return u.setStart(r,0),u.setEnd(a,a.data.length),!1!==n&&e.selection.setRng(u),u}},be=tinymce.util.Tools.resolve("tinymce.Env"),we=function(e,t){var n,r=(n=c(y.none()),{clear:function(){return n.set(y.none())},set:function(e){return n.set(y.some(e))},isSet:function(){return n.get().isSome()},on:function(e){return n.get().each(e)}});e.undoManager.add();var a=b.trim(e.selection.getContent({format:"text"})),i=function(e){(1<t.get().count?e.enable:e.disable)("next"),(1<t.get().count?e.enable:e.disable)("prev")},o=function(e,t){var n=t?e.disable:e.enable;E(["replace","replaceall","prev","next"],n)},s=function(e,t){be.browser.isSafari()&&be.deviceType.isTouch()&&("find"===t||"replace"===t||"replaceall"===t)&&e.focus(t)},u=function(n){ve(e,t,!1),o(n,!0),i(n)},f=function(n){var r,a,c=n.getData(),s=t.get();c.findtext.length?(s.text===c.findtext&&s.matchCase===c.matchcase&&s.wholeWord===c.wholewords?ge(e,t):((r=me(e,t,c.findtext,c.matchcase,c.wholewords,c.inselection))<=0&&(a=n,e.windowManager.alert("Could not find the specified string.",function(){a.focus("findtext")})),o(n,0===r)),i(n)):u(n)},d=t.get(),m={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace All",disabled:!0}],initialData:{findtext:a,replacetext:"",wholewords:d.wholeWord,matchcase:d.matchCase,inselection:d.inSelection},onChange:function(e,n){"findtext"===n.name&&0<t.get().count&&u(e)},onAction:function(n,r){var a,o,c=n.getData();switch(r.name){case"find":f(n);break;case"replace":(ye(e,t,c.replacetext)?i:u)(n);break;case"replaceall":ye(e,t,c.replacetext,!0,!0),u(n);break;case"prev":he(e,t),i(n);break;case"next":ge(e,t),i(n);break;case"matchcase":case"wholewords":case"inselection":a=n.getData(),o=t.get(),t.set(l(l({},o),{matchCase:a.matchcase,wholeWord:a.wholewords,inSelection:a.inselection})),u(n)}s(n,r.name)},onSubmit:function(e){f(e),s(e,"find")},onClose:function(){e.focus(),ve(e,t),e.undoManager.add()}};r.set(e.windowManager.open(m,{inline:"toolbar"}))},ke=function(e,t){return function(){we(e,t)}};s.add("searchreplace",function(e){var t,n,r,a,i,o,s=c({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return n=s,(t=e).addCommand("SearchReplace",function(){we(t,n)}),a=s,(r=e).ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:ke(r,a),icon:"search"}),r.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:ke(r,a),icon:"search"}),r.shortcuts.add("Meta+F","",ke(r,a)),i=e,o=s,{done:function(e){return ve(i,o,e)},find:function(e,t,n,r){return void 0===r&&(r=!1),me(i,o,e,t,n,r)},next:function(){return ge(i,o)},prev:function(){return he(i,o)},replace:function(e,t,n){return ye(i,o,e,t,n)}}})}();